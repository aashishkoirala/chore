<div class="sidebar right well well-small font-smaller" ng-controller="itemEditCtrl" ng-show="vm.isInitialized">
    
    <!-- Error message, if any -->
    <div class="alert alert-error" ng-show="vm.isErrorReceived" ng-bind="vm.errorReceived"></div>

    <!-- Create New Task -->
    <div ng-show="vm.editedItem == null && !vm.isInBulkMode">
        <h6>CREATE NEW TASK</h6>

        <div class="label label-info" ng-bind="vm.validateItem(vm.newItem).Message"></div><br/><br/>

        <textarea class="input-block-level" placeholder="Task Description" ng-model="vm.newItem.Description"></textarea>

        Due:<br/>
        <input type="date" ng-model="vm.newItem.ScheduledEndDateAsString"/><br/>

        Start:<br/>
        <input type="date" ng-model="vm.newItem.ScheduledStartDateAsString"/><br/>

        Categories:<br/>
        <span ng-repeat="category in vm.categoryList">
            <span ng-bind="category.getIndent('··')"></span>
            <input class="checkbox" type="checkbox" ng-model="vm.newItem.CategoryIdSelectedHash[category.Id]"/>&nbsp;
            <span ng-bind="category.Name"></span>
            <br/>
        </span>

        <button type="button" class="btn btn-small btn-info pull-right" 
                ng-click="vm.saveNewItem()" 
                ng-disabled="!vm.validateItem(vm.newItem).IsValid">Create</button>
    </div>
    
    <!-- Edit Single Task -->
    <div ng-show="vm.editedItem != null && !vm.isInBulkMode">
        <h6>EDIT TASK</h6>

        <div class="label label-info" ng-bind="vm.validateItem(vm.editedItem).Message"></div><br/><br/>

        <textarea class="input-block-level" ng-model="vm.editedItem.Description" placeholder="Task Description"></textarea>

        Due:<br/>
        <input type="date" ng-model="vm.editedItem.ScheduledEndDateAsString"/><br/>

        Start:<br/>
        <input type="date" ng-model="vm.editedItem.ScheduledStartDateAsString"/><br/>

        Categories:<br/>
        <span ng-repeat="category in vm.categoryList">
            <span ng-bind="category.getIndent('··')"></span>
            <input class="checkbox" type="checkbox" ng-model="vm.editedItem.CategoryIdSelectedHash[category.Id]"/>&nbsp;
            <span ng-bind="category.Name"></span>
            <br/>
        </span>

        <button type="button" class="btn btn-small pull-right" ng-click="vm.cancelEditing()">Cancel</button>
        <span class="pull-right">&nbsp;&nbsp;</span>

        <button type="button" class="btn btn-small btn-info pull-right" 
                ng-click="vm.updateItem()" 
                ng-disabled="!vm.validateItem(vm.editedItem).IsValid">Save</button>
    </div>
    
    <!-- Edit Bulk Tasks -->
    <div ng-show="vm.isInBulkMode">
        <h6>BULK EDIT TASKS</h6>

        <div class="text-center">
            <button type="button" class="btn btn-info" title="Start" ng-click="vm.performBulkAction('Start')"><i class="icon-play"></i></button>
            <button type="button" class="btn btn-info" title="Pause" ng-click="vm.performBulkAction('Pause')"><i class="icon-pause"></i></button>
            <button type="button" class="btn btn-info" title="Mark As Done" ng-click="vm.performBulkAction('Complete')"><i class="icon-check"></i></button>
            <button type="button" class="btn btn-info" title="Remove" ng-click="vm.performBulkAction('Delete')"><i class="icon-remove"></i></button>
        </div>
        <br/><br/>

        <div class="label label-info" ng-bind="vm.validateBulkItemOperation().Message"></div><br/><br/>

        <input type="checkbox" class="checkbox" ng-model="vm.bulkItemOperation.IsScheduledEndDateUpdateRequested"/>&nbsp;
        Set Due Date<br/>
        <input type="date" ng-model="vm.bulkItemOperation.ScheduledEndDate" ng-disabled="!vm.bulkItemOperation.IsScheduledEndDateUpdateRequested"/><br/><br/>

        <input type="checkbox" class="checkbox" ng-model="vm.bulkItemOperation.IsScheduledStartDateUpdateRequested"/>
        Set Start Date<br/>
        <input type="date" ng-model="vm.bulkItemOperation.ScheduledStartDate" ng-disabled="!vm.bulkItemOperation.IsScheduledStartDateUpdateRequested"/><br/><br/>

        <input type="checkbox" class="checkbox" ng-model="vm.bulkItemOperation.IsCategoryListUpdateRequested"/>
        <b>Set Categories</b><br/>
        <span ng-repeat="category in vm.categoryList">
            <span ng-bind="category.getIndent('··')"></span>
            <input class="checkbox" type="checkbox" ng-model="vm.bulkItemOperation.CategoryIdSelectedHash[category.Id]" ng-disabled="!vm.bulkItemOperation.IsCategoryListUpdateRequested"/>&nbsp;
            <span ng-bind="category.Name"></span>
            <br/>
        </span>

        <button type="button" class="btn btn-small btn-info pull-right" 
                ng-disabled="!vm.bulkItemOperation.IsScheduledEndDateUpdateRequested && !vm.bulkItemOperation.IsScheduledStartDateUpdateRequested && !vm.bulkItemOperation.IsCategoryListUpdateRequested"
                ng-click="vm.performBulkAction('Update')">Save</button>
    </div>
</div>